<div [@routerTransition]>
  <div class="content d-flex flex-column flex-column-fluid">
    <div id="kt_app_toolbar" class="app-toolbar py-2">
      <div id="kt_app_toolbar_container" class="app-container container-fluid d-flex flex-stack">
        <div data-kt-swapper="true" data-kt-swapper-mode="{default: 'prepend', lg: 'prepend'}"
          data-kt-swapper-parent="{default: '#kt_app_content_container', lg: '#kt_app_toolbar_container'}"
          class="page-title d-flex flex-column justify-content-center flex-wrap me-3 mb-5 mb-lg-0">
          <h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">
            Course  Descriptions </h1>
          <!-- <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
            <li class="breadcrumb-item text-muted">
              <span class="text-muted text-hover-primary">Course Descriptions </span>
            </li>
            <li class="breadcrumb-item">
              <span class="bullet bg-gray-400 w-5px h-2px"></span>
            </li>
            <li class="breadcrumb-item text-muted">Toolbars</li>
          </ul> -->
        </div>
        <div class="d-flex align-items-center gap-2">
          <div class="d-flex align-items-center">
            <div class="position-relative w-md-400px me-md-2">
              <i
                class="fa-duotone fa-magnifying-glass fs-3 text-gray-500 position-absolute top-50 translate-middle ms-6">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
              <input type="text" class="form-control form-control-solid ps-10" name="search" value=""
                placeholder="Search" />
            </div>
          </div>
          <div class="d-flex align-items-center">
            <div class="bullet bg-secondary h-35px w-1px mx-5"></div>
          </div>
          <div class="d-flex align-items-center">
            <div class="d-flex">
              <button (click)="createOrEditSectionModal.show(this.id)" class="btn btn-primary blue">
                <i class="fa-duotone fa-bookmark-circle fs-2x"></i>
                Course Section
              </button>
              <button (click)="createOrEditCourseDescriptionModal.show(this.id)" class="btn btn-primary blue">
                <i class="fa-duotone fa-book fs-2x"></i>
                Lesson
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="content d-flex flex-column flex-column-fluid">

    <div class="card mb-6 mb-xl-9">
      <div class="card-body pt-9 pb-0">
        <!--begin::Details-->
        <div class="d-flex flex-wrap flex-sm-nowrap mb-6">
          <!--begin::Image-->

          <div *ngIf="course.courseImageByte"
            class="d-flex flex-center flex-shrink-0 bg-light rounded w-100px h-100px w-lg-150px h-lg-150px me-7 mb-4">
            <img class="mw-150px mw-lg-155px" src="data:image/jpeg;base64, {{course.courseImageByte}}"
              alt="{{course.courseImageName}}">
              
          </div>
          
          <!--end::Image-->

          <!--begin::Wrapper-->
          <div class="flex-grow-1">
            <!--begin::Head-->
            <div class="d-flex justify-content-between align-items-start flex-wrap mb-2">
              <!--begin::Details-->
              <div class="d-flex flex-column">
                <!--begin::Status-->
                <div class="d-flex align-items-center mb-1">
                  <span class="text-gray-800 text-hover-primary fs-2 fw-bold me-3">{{course.name}}</span>
                
                  <i class="fa-duotone fa-badge-check  fs-2x text-primary"></i>
                  <span class="btn btn-sm btn-light-success fw-bolder ms-2 fs-8 py-1 px-3 cursor-pointer">{{course.coursePhaseLevel}}</span>
                </div>
                <!--end::Status-->

                <!--begin::Description-->
                <div class="d-flex flex-wrap fw-semibold mb-4 fs-5 text-gray-700 pl-10">
                  {{course.description}}
                </div>
                <!--end::Description-->
              </div>
              <!--end::Details-->

             
              <!--end::Actions-->
            </div>
            <!--end::Head-->

            <!--begin::Info-->
            <div class="d-flex flex-wrap justify-content-start">
              <!--begin::Stats-->
              <div class="d-flex flex-wrap">
                <!--begin::Stat-->
                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                  <!--begin::Number-->
                  <div class="d-flex align-items-center">
                    <i class="fa-duotone fa-arrow-up fs-3 text-success me-2"><span class="path1"></span><span
                        class="path2"></span></i>

                    <div class="fs-4 fw-bold"> {{ course.startDate | luxonFormat: 'yyyy LLL dd , EEEE' }}</div>
                  </div>
                  <!--end::Number-->

                  <!--begin::Label-->
                  <div class="fw-semibold fs-6 text-gray-400">Start Date</div>
                  <!--end::Label-->
                </div>
                <!--end::Stat-->

                <!--begin::Stat-->
                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                  <!--begin::Number-->
                  <div class="d-flex align-items-center">
                    <i class="fa-duotone fa-arrow-down fs-3 text-danger me-2"><span class="path1"></span><span
                        class="path2"></span></i>
                    <div class="fs-4 fw-bold"> {{ course.endDate | luxonFormat: 'yyyy LLL dd , EEEE' }}</div>
                  </div>
                  <!--end::Number-->

                  <!--begin::Label-->
                  <div class="fw-semibold fs-6 text-gray-400">End Date</div>
                  <!--end::Label-->
                </div>
                <!--end::Stat-->

                <!--begin::Stat-->
                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                  <!--begin::Number-->
                  <div class="d-flex align-items-center">
                    <i class="fa-duotone fa-timer fs-3 text-success me-2"><span class="path1"></span><span
                        class="path2"></span></i>
                    <div class="fs-4 fw-bold counted">{{course.startTime}}<i
                        class="fa-duotone fa-arrow-right"></i>{{course.endTime}}</div>
                  </div>
                  <!--end::Number-->

                  <!--begin::Label-->
                  <div class="fw-semibold fs-6 text-gray-400">Time</div>
                  <!--end::Label-->
                </div>
                <!--end::Stat-->
              </div>
            </div>
            <!--end::Info-->
          </div>
          <!--end::Wrapper-->
        </div>
        <!--end::Details-->

        <div class="separator"></div>

        <!--begin::Nav-->
        
      </div>
    </div>

  </div>
  <div [class]="containerClass">
    <div class="card card-bordered">
      <div class="row">
        <div class="col-xl-12">
          <div class="card bg-light text-seconday on-hover-action mb-5" id="section-6"
            *ngFor="let items of course.courseSection; index as i">
            <div class="card-body">
              <div class="row align-items-center">
                <div class="col">
                  <h5 class="card-title" style="min-height: 30px">
                    <span class="font-weight-light">
                      Section {{i+1}}:
                    </span>
                    {{items.name}}
                  </h5>
                </div>
                <div class="col-auto">
                  <!-- <i class="fa-duotone fa-pen-field me-4"></i> -->
                  <!-- <i class="fa-duotone fa-trash" (click)="deleteSection(items.id)"></i> -->
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-md-12">
                  <div class="card text-secondary on-hover-action mb-2" id="lesson-31"
                    *ngFor="let details of items.lessons; index as j">
                    <div class="card-body thinner-card-body">
                      <div class="row align-items-center">
                        <div class="col-auto">
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='YouTubeVideo'"
                            class="fa-duotone fa-video fs-2x text-primary"></i>
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='Text'"
                            class="fa-duotone fa-file-lines fs-2x text-primary"></i>
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='VimeoVideo'"
                            class="fa-duotone fa-video-circle fs-2x text-primary"></i>
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='Videofile'"
                            class="fa-duotone fa-file-lines fs-2x text-primary"></i>
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='AmazonBucket'"
                            class="fa-duotone fa-file-lines fs-2x text-primary"></i>
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='GoogledriveVideo'"
                            class="fa-duotone fa-disc-drive fs-2x text-primary"></i>
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='DocumentFile'"
                            class="fa-duotone fa-file-lines fs-2x text-primary"></i>
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='IframeEmbed'"
                            class="fa-duotone fa-file-lines fs-2x text-primary"></i>
                          <i *ngIf="lessionTypeMapping[details.lessionType]=='Vedio Url'"
                            class="fa-duotone fa-file-lines fs-2x text-primary"></i>

                        </div>
                        <div class="col">
                          <h5 class="card-title mb-0">
                            <span class="font-weight-light">
                              Lesson {{j+1}}:
                            </span>
                            {{details.name}}
                          </h5>
                        </div>
                        <div class="col-auto">
                          <i class="fa-duotone fa-pen-field me-4"
                            (click)="createOrEditCourseDescriptionModal.showEdit(details.id)"></i>

                          <i class="fa-duotone fa-trash" (click)="deleteLesson(details.id)"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <createOrEditCourseDescriptionModal #createOrEditCourseDescriptionModal (modalSave)="getCourseDetail()">
  </createOrEditCourseDescriptionModal>
  <createOrEditSectionModal #createOrEditSectionModal (modalSave)="getCourseDetail()"></createOrEditSectionModal>